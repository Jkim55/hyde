#!/usr/bin/env ruby
require './lib/fileio'
require 'kramdown'

arg_title = ARGV[2..-1].join("-")
date = Time.now.strftime("%Y-%d-%m")

puts "You ran Hyde with these arguments: #{ARGV[0]} #{ARGV[1]}."

if ARGV[0] == "new"
  Fileio.new.create_source_tree_structure(ARGV[1])
elsif ARGV[0] == "build"
  Fileio.new.build_output_file_structure(ARGV[1])
elsif ARGV[0] == "post"
  File.write("#{ARGV[1]}/source/posts/#{date + "-" + arg_title}.md", "# #{arg_title.gsub!("-", " ")}\n\nYour content here.\nStart writing, Hemmingway!")
  # File.write("#{ARGV[1]}/source/posts/#{arg_title}.html", File.read("./text/index.txt"))
  puts "Created a new post file at #{ARGV[1]}/source/posts/#{date}-#{ARGV[2..-1].join("-")}.markdown"
else
  puts "Error! '#{ARGV[1]}' doesn't compute! Moron!"
end
